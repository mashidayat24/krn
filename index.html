<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Situs Pencarian Data</title>
    <!-- Tailwind CSS CDN untuk styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        .container {
            max-width: 800px;
        }
        .search-results-table {
            width: 100%;
            border-collapse: collapse;
        }
        .search-results-table th, .search-results-table td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }
        .search-results-table th {
            background-color: #1f2937;
            color: white;
            font-weight: 600;
        }
        .search-results-table tr:nth-child(even) {
            background-color: #f9fafb;
        }
        .search-results-table tr:hover {
            background-color: #e5e7eb;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <div class="container bg-white p-8 rounded-xl shadow-lg w-full">
        <h1 class="text-3xl font-bold text-gray-800 text-center mb-6">Pencarian Data</h1>
        
        <!-- Input Pencarian dan Tombol -->
        <div class="flex items-center space-x-4 mb-8">
            <input type="text" id="searchInput" placeholder="Cari berdasarkan nama, produk, atau kota..." class="flex-grow p-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 transition-colors duration-200">
            <button id="searchButton" class="bg-blue-600 text-white font-semibold p-3 rounded-lg hover:bg-blue-700 transition-colors duration-200 shadow-md">
                Cari
            </button>
        </div>

        <!-- Area untuk menampilkan hasil -->
        <div id="resultsContainer">
            <p class="text-center text-gray-500">Silakan masukkan kata kunci pencarian dan klik "Cari".</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Simulasi data dari file vkrn.csv
            const vkrnCsvContent = `Nama,Toko,Produk,Kota,Harga
Budi Santoso,Toko Bahagia,Laptop Acer,Jakarta,8500000
Siti Aminah,Elektronik Jaya,Monitor Samsung,Bandung,2300000
Agus Widodo,Gudang Gadget,Keyboard Logitech,Surabaya,750000
Dewi Lestari,Toko Digital,Mouse Wireless,Jakarta,250000
Joko Susilo,Tekno Shop,Webcam,Semarang,400000
Rina Putri,Pusat Komputer,Speaker Bluetooth,Bandung,600000
Hendra Kusuma,Toko Bahagia,Headset Gaming,Jakarta,900000
Lina Wati,Gudang Gadget,Printer Epson,Surabaya,1200000
Fajar Nugraha,Elektronik Jaya,Harddisk Eksternal,Semarang,800000
Eka Sari,Tekno Shop,Flashdisk 64GB,Yogyakarta,150000`;

            const searchInput = document.getElementById('searchInput');
            const searchButton = document.getElementById('searchButton');
            const resultsContainer = document.getElementById('resultsContainer');

            // Fungsi untuk mengurai konten CSV menjadi array of objects
            function parseCsv(csvString) {
                const lines = csvString.trim().split('\n');
                const headers = lines[0].split(',');
                const data = lines.slice(1).map(line => {
                    const values = line.split(',');
                    const rowObject = {};
                    headers.forEach((header, i) => {
                        rowObject[header.trim()] = values[i].trim();
                    });
                    return rowObject;
                });
                return data;
            }

            // Menguraikan data CSV
            const allData = parseCsv(vkrnCsvContent);

            // Fungsi untuk menampilkan hasil pencarian
            function displayResults(results) {
                if (results.length === 0) {
                    resultsContainer.innerHTML = `<p class="text-center text-gray-500">Tidak ada data yang cocok dengan kata kunci Anda.</p>`;
                    return;
                }

                // Membuat tabel untuk menampilkan hasil
                let html = `
                    <div class="overflow-x-auto rounded-lg shadow-md">
                        <table class="search-results-table">
                            <thead>
                                <tr>
                                    <th>Nama</th>
                                    <th>Toko</th>
                                    <th>Produk</th>
                                    <th>Kota</th>
                                    <th>Harga</th>
                                </tr>
                            </thead>
                            <tbody>
                `;

                results.forEach(item => {
                    html += `
                        <tr>
                            <td>${item.Nama}</td>
                            <td>${item.Toko}</td>
                            <td>${item.Produk}</td>
                            <td>${item.Kota}</td>
                            <td>${item.Harga}</td>
                        </tr>
                    `;
                });

                html += `
                            </tbody>
                        </table>
                    </div>
                `;

                resultsContainer.innerHTML = html;
            }

            // Fungsi untuk menangani klik tombol pencarian
            searchButton.addEventListener('click', () => {
                const query = searchInput.value.toLowerCase().trim();
                const filteredResults = allData.filter(item => {
                    // Cek di setiap kolom yang relevan
                    return (
                        item.Nama.toLowerCase().includes(query) ||
                        item.Toko.toLowerCase().includes(query) ||
                        item.Produk.toLowerCase().includes(query) ||
                        item.Kota.toLowerCase().includes(query)
                    );
                });
                displayResults(filteredResults);
            });

            // Tampilkan semua data saat halaman dimuat
            displayResults(allData);
        });
    </script>

</body>
</html>
